---
layout: post
title: Using Bagit
date: 2016-09-20 10:14:37.000000000 -04:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Digital Preservation
tags: []
meta:
  _oembed_358261d9441fb650ad5717221a2c437c: "{{unknown}}"
  _oembed_0d6103488fb829d3b8c6ad94b3c15cfb: "{{unknown}}"
  _oembed_355c0a3ad109cfbcb0c8c98ad8043e67: "{{unknown}}"
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _thumbnail_id: '1445'
  _wpas_skip_5947049: '1'
  _publicize_job_id: '27021973093'
  _oembed_9ee87420c8b0e8542fdff9d382eea86b: "{{unknown}}"
  _oembed_4f12ebae577b80901e3009f2b70efa94: "{{unknown}}"
  _oembed_1aaa9c7672d9cb7e98c5d841c483f8fc: "{{unknown}}"
author:
  login: bestfilmsofourlives
  email: e.gates42@gmail.com
  display_name: Ethan
  first_name: ''
  last_name: ''
---
<blockquote>do you know how to use Bagit?<br />
cause I'm lost<br />
the libcongress github is sooo not user friendly</p>
<p>I'm missing bagger aren't I<br />
ugh ugh I just want to make a bag!</p></blockquote>
<p>That's an email I got a few weeks back from a good friend and former MIAP classmate. I wanted to share it because I feel like it sums up the attitude of a lot of archivists towards a tool that SHOULD be something of a godsend to the field and a foundational step in many digital preservation workflows - namely, the Library of Congress' BagIt.</p>
<p>What is BagIt? It's a software library, developed by the LoC in conjunction with their partners in the National Digital Information Infrastructure and Preservation Program (NDIIPP) to support the creation of "bags." OK, so what's a bag?</p>
<p><img class="  wp-image-1439 aligncenter" src="{{ site.baseurl }}/images/amerbeauty_165pyxurz.jpg" alt="amerbeauty_165pyxurz" width="573" height="316" /></p>
<p>Let's back up a minute. One of the big challenges in digital archiving is file fixity - a fancy term for checking that the contents of a file have not been changed or altered (that the file has remained "fixed"). There's all sorts of reasons to regularly verify file fixity, even if a file has done nothing but sit on a computer or server or external hard drive: to make sure that a file hasn't corrupted over time, that its metadata (file name, technical specs, etc.) hasn't been accidentally changed by software or an operating system, etc.</p>
<p>But one of the biggest threats to file fixity is when you move a file - from a computer to a hard drive, or over a server, or even just from one folder/directory in your computer to another. Think of it kind of like putting something in the mail: there are a lot of points in the mailing process where a computer or USPS employee has to read the labeling and sort your mail into the proper bin or truck or plane so that it ends up getting to the correct destination. And there's a LOT of opportunity for external forces to batter and jostle and otherwise get in your mail's personal space. If you just slap a stamp on that beautiful glass vase you bought for your mother's birthday and shove it in the mailbox, it's not going to get to your mom in one piece.</p>
<p>[caption id="attachment_1455" align="aligncenter" width="492"]<img class="  wp-image-1455 aligncenter" src="{{ site.baseurl }}/images/screen-shot-2016-09-20-at-10-04-35-am.png" alt="screen-shot-2016-09-20-at-10-04-35-am" width="492" height="351" /> And what if you're delivering something even more precious than a vase?[/caption]</p>
<p>So a "bag" is a kind of special digital container - a way of packaging files together to make sure what we get on the receiving end of a transfer is the same thing that started the journey (like putting that nice glass vase in a heavily padded box with "fragile" stamped all over it).</p>
<p>Great, right? Generating a bag can take more time than people want, particularly if you're an archive dealing with large, preservation-quality uncompressed video files, but it's a no-brainer idea to implement into workflows for backing up/storing data. The thing is, as I said, the BagIt tools developed by the Library of Congress to support the creation of bags are software <em>libraries</em> - not necessarily in and of themselves fully-developed, ready-to-go applications. Developers have to put some kind of interface on top of the BagIt library for people to actually be able to actually interact and use it to create bags.</p>
<p>So right off the bat, even though tech-savvier archivists may constantly be recommending to others in the field to "use BagIt" to deliver or move their files, we're already muddling the issue for new users, because there literally is no one, monolithic thing called "BagIt" that someone can just google and download and start running. And I think we seriously underestimate how much of a hindrance that is to widespread implementation. Basically anyone can understand the principles and need behind BagIt (I hopefully did a swift job of it in the paragraphs above) - but actually sifting through and installing the various BagIt distributions currently takes time, and an ability to read between the lines of some seriously scattered documentation.</p>
<p>So here I'm going to walk through the major BagIt implementations and explain a bit about how and why you might use each one. I hope consolidating all this information in one place will be more helpful than the Library of Congress' github <a href="https://github.com/LibraryOfCongress" target="_blank" rel="noopener">pages</a> (which indeed make little effort to make their instructions accessible to anyone unfamiliar with developer-speak). If you want to learn more about the BagIt specification itself (i.e. what pieces/files actually make up a bag, how data gets hierarchically structured inside a bag, how BagIt checksums and tag manifests to do the file fixity work I mentioned earlier), I can recommend this <a href="https://docs.google.com/presentation/d/1FcFqLa3OUUA7uhYEbzQRfD3K5WLh2OTGYCE8e9fY36U/edit#slide=id.g39e33523_0_90" target="_blank" rel="noopener">introductory slideshow</a> to BagIt from Justin Littman at the LoC.</p>
<p><em>Update (12/15/2017): </em>While all the above info still stands, the roundup and installation instructions below are no longer 100% accurate. I'm keeping this post up for the sake of web archiving and laying the ever-changing state of digital preservation bare and all that, but if you're here I'd now recommend that you proceed over to <a href="https://patchbaytech.wordpress.com/2017/12/15/using-bagit-in-2018/">this post on using BagIt in 2018</a> for more up-to-date documentation!</p>
<p><strong>1. Bagger (BagIt-java)</strong></p>
<p><img class="  wp-image-1445 aligncenter" src="{{ site.baseurl }}/images/screen-shot-2016-09-20-at-9-27-12-am.png" alt="screen-shot-2016-09-20-at-9-27-12-am" width="534" height="398" /></p>
<p>The BagIt library was originally developed using a programming language called Java. For its first four stable versions, Bagit-java could be used either via command-line interface (a Terminal window on Macs or Linux/Ubuntu, Command Prompt in Windows), or via a Graphical User Interface (GUI) developed by the LoC itself called Bagger.</p>
<p>As of version 5 of Bagit-java, the LoC has completely ceased support of using BagIt-java via the command line. That doesn't mean it isn't still out there - if, for instance, you're on a Mac and use the popular package manager Homebrew, typing</p>
<blockquote><p>$ brew install bagit</p></blockquote>
<p>will install the last, stable version (4.12.1) of BagIt-java. But damned if I know how to actually use it, because in its deprecation of support the LoC seems to have removed (or maybe just never wrote?) any online documentation (github or elsewhere) of how to use BagIt-java via command-line. No manual page for you.</p>
<p>Instead you now have to use <a href="https://github.com/LibraryOfCongress/bagger/releases/tag/v2.7.1" target="_blank" rel="noopener">Bagger</a> to employ BagIt-java (from the LoC's perspective, anyway). Bagger is primarily designed to run on Windows or, with some tinkering, Linux/Ubuntu and Mac OSX.</p>
<p>[caption id="attachment_1462" align="aligncenter" width="560"]<img class="  wp-image-1462 aligncenter" src="{{ site.baseurl }}/images/maxresdefault.jpg" alt="maxresdefault" width="560" height="373" /> They do, funnily enough, include a screed about the iPhone 7's lack of a 3.5mm headphone jack.[/caption]</p>
<p>So once you actually download Bagger, which I primarily recommend if you're on Windows, there's some pretty good existing <a href="http://metaarchive.org/public/resources/neh/research/BagIt_Usage_Instructions.pdf" target="_blank" rel="noopener">documentation</a> for using the application's various features, and even without doing that reading, it's a pretty intuitive program. Big honking buttons help you either start making a new bag (picking the A/V and other files you want to be included in the bag one-by-one and safely packaging them together into one directory) or create a "bag in place", which just takes an already-existing folder/directory and structures the content within that folder according to the BagIt specification. You can also validate bags that have been given/sent to you (that is, check the fixity of the data). The "Is Bag Complete" feature checks whether a folder/directory you have is, in fact, officially a bag according to the rules of the BagIt spec.</p>
<p>(FWIW: I managed to get Bagger running on my OSX 10.10.5 desktop by installing an older version, 2.1.3, off of the Library of Congress' <a href="https://sourceforge.net/projects/loc-xferutils/files/loc-bagger/" target="_blank" rel="noopener">Sourceforge</a>. That download included a bagger.jar file that my Mac could easily open after installing the legacy Java 6 runtime environment (available <a href="https://support.apple.com/kb/dl1572?locale=en_US" target="_blank" rel="noopener">here</a>). But, that same Sourceforge page yells at you that the project has moved to <a href="https://github.com/LibraryOfCongress/bagger" target="_blank" rel="noopener">Github</a>, where you can only download the latest 2.7.1 release, which only includes the Windows-compatible bagger.bat file and material for compiling on Linux, no OSX-compatible .jar file. I have no idea what's going on here, and we've definitely fallen into a tech-jargon zone that will scare off laypeople, so I'm going to leave it at "use Bagger with Windows")</p>
<p><em>Update:</em> After some initial confusion (see above paragraph), the documentation for running Bagger on OSX has improved twofold! First, the latest release of Bagger (2.7.2) came with some tweaks to the github <a href="https://github.com/LibraryOfCongress/bagger" target="_blank" rel="noopener">repo's documentation</a>, including instructions for Linux/Ubuntu/OSX! Thanks, guys! Also check out the comments section on this page for some instructions for launching Bagger in OSX from the command-line and/or creating an AppleScript that will let you launch Bagger from Spotlight/the Applications menu like you would any other program.</p>
<p><strong>2. Exactly</strong></p>
<p>[caption id="attachment_1442" align="aligncenter" width="592"]<img class="  wp-image-1442 aligncenter" src="{{ site.baseurl }}/images/screen-shot-2016-09-20-at-9-29-04-am.png" alt="screen-shot-2016-09-20-at-9-29-04-am" width="592" height="390" /> Ed Begley knows exactly what I'm talking about[/caption]</p>
<p>Developed by the consulting/developer agency AVPreserve with University of Kentucky Libraries, Exactly is another GUI built on top of Bagit-java. Unlike Bagger, it's very easy to <a href="https://www.avpreserve.com/avpsresources/tools/" target="_blank" rel="noopener">download</a>, immediately install and run versions of Exactly for Mac or Windows, and AVPreserve provides a handy quickstart guide and a more detailed user manual, both very useful if you're just getting started with bagging. Its features are at once more limited and more expansive than Bagger. The interface isn't terribly verbose, meaning it's not always clear what the application is actually doing from moment to moment. But Exactly is more robustly designed for insertion of extra metadata into the bag (users can create their own fields and values to be inserted in a bag's bag-info.txt file, so you could include administrative metadata unique to your own institution).</p>
<p>And Exactly's biggest attraction is that it actually serves as a file delivery client - that is, it won't just package the files you want into a bag before transferring, but actual perform the transfer. So if you want to regularly move files to and from a dedicated server for storage with minimal fuss, Exactly might be the tool you want, albeit it could still use some aesthetic/verbosity design upgrades.</p>
<p><strong>3. Command Line (BagIt-python)</strong></p>
<p><img class="  wp-image-1447 aligncenter" src="{{ site.baseurl }}/images/screen-shot-2016-09-20-at-9-02-09-am.png" alt="screen-shot-2016-09-20-at-9-02-09-am" width="481" height="266" /></p>
<p>Let's say you really prefer to work with command-line software. If you're comfortable with CLI, there are many advantages - greater control over your bagging software and exactly how it operates. I mentioned earlier that the LoC stopped supporting BagIt-java for command-line, but that doesn't mean you command-line junkies are completely out of luck. Instead they <em>shifted</em> support and development of command-line bagging to a different programming language: Python.</p>
<p>If you're working in the command-line, chances are you're on Mac OSX or maybe Linux. I'm going to assume from here on you're on OSX, because anyone using Linux has likely figured all this out themselves (or would prefer to). And here's the thing, if you're a novice digital archivist working in the Terminal on OSX: you can't install BagIt-python using Homebrew.</p>
<p>Instead, you're going to need Python's own package manager, a program called "pip." In order to get Bagit-python, you're going to need to do the following:</p>
<ol>
<li><span style="font-weight:400;"><span style="font-weight:400;"><span style="font-weight:400;">Check what version of Python is on your computer. Mac OSX and Linux machines should come with Python already installed, but Bagit-python will require at least Python version 2.6 or above. You can check what version of Python you’re running in the terminal with:</span></span></span><span style="font-weight:400;"><span style="font-weight:400;"><span style="font-weight:400;">$ python ––version</span></span></span>
<p><span style="font-weight:400;">If your version isn’t high enough, visit </span><a href="https://www.python.org/downloads/"><span style="font-weight:400;">https://www.python.org/downloads/</span></a><span style="font-weight:400;"> and download/install Python 2.7.12 for your operating system. (do </span><span style="font-weight:400;">not</span><span style="font-weight:400;"><span style="font-weight:400;"> download a version of Python 3.x - Bagit-python will not work with Python 3, as if this wasn’t confusing enough)</span></span></li>
<li><span style="font-weight:400;"><span style="font-weight:400;"><span style="font-weight:400;">Now you’ll need the package manager/installer, pip. It may have come ready to go with your Python installation, or not. You can check that you have pip installed with:</span></span></span><span style="font-weight:400;"><span style="font-weight:400;"><span style="font-weight:400;">$ pip ––version</span></span></span>
<p><span style="font-weight:400;">If you get a version number, you’re ready to go to step 3. If you get a message that pip isn’t installed, you’ll have to visit </span><a href="https://pip.pypa.io/en/stable/installing/"><span style="font-weight:400;">https://pip.pypa.io/en/stable/installing/</span></a><span style="font-weight:400;">Click on the hyperlinked "get-pip.py". A tab should open with a buncha text - just hit Command-S and you should have the option to save/download this page as a Python script (that is, as a .py file). Then, back in the Terminal, navigate into whatever directory you just downloaded that script into (Downloads perhaps, or Desktop, or wherever else), and run the script by invoking</span>$ python get-pip.py</p>
<p>Pip should now be installed.</p>
<p>&nbsp;</li>
<li><span style="font-weight:400;"><span style="font-weight:400;">Once pip is in place you can just use it to install Bagit-python the same way you use Homebrew:</span></span><span style="font-weight:400;">$ pip install bagit               (sudo if necessary)</span></li>
</ol>
<p>You should be all set now to start using Bagit-python via the command-line. You can invoke Bagit-python using commands that start with “bagit.py” - it’s a good idea to go over command line usage and options for adding metadata by visiting the help page first, which is one of the LoC's better efforts at documentation: <a href="https://github.com/LibraryOfCongress/bagit-python">https://github.com/LibraryOfCongress/bagit-python</a> or:</p>
<p>$ bagit.py --help</p>
<p>But the easiest usage is just to create a bag “in place” on a directory you already have, with a flag for whichever kind of checksum you want to use for fixity:</p>
<p>$ bagit.py --md5 /path/to/directory</p>
<p>As with Bagger, the directory will remain exactly where it is in your file system, but now will contain the various tag/checksum manifests and all the media files within a “data” folder according to the BagIt spec. Again, the power of command-line BagIt-python lies in its flexibility - the ability to add metadata, choose different checksum configurations, increase or decrease the verbosity of the software. If you're comfortable with command-line tools, this is the implementation I would most recommend!</p>
<p><em>Update: </em> Please also read this terrific <a href="https://github.com/dinahhandel/NDSRNY2016_Symposium/blob/master/Bag-it%20Workshop/more-bag-activities.md" target="_blank" rel="noopener">tutorial</a> by Kathryn Gronsbell for the 2016 NDSR symposium for a more detailed rundown of BagIt-python use and installation, including sample exercises!!!</p>
<p><strong>4. BaggerJS</strong></p>
<p><img class="  wp-image-1451 aligncenter" src="{{ site.baseurl }}/images/screen-shot-2016-09-20-at-9-31-51-am.png" alt="screen-shot-2016-09-20-at-9-31-51-am" width="612" height="403" /></p>
<p>It's still in an early/experimental phase, but the LoC is also working on a web-based application for bagging called BaggerJS (built on a version of the BagIt library written in JavaScript, which yes, for those wondering at home, is a totally different programming language than Java that works specifically for web applications, because we needed more versioning talk in this post).</p>
<p>Right now you can select and hash files (generate checksums for file fixity), and upload valid bags to a cloud server compatible with Amazon's s3 protocol. Metadata entry and other features are still incomplete, but if development continues, this might, like Exactly, be a nice, simplified way to perform light bag transfers, particularly if you use a cloud storage service to back up files. It also has the advantage of not requiring any installation whatsoever, so novice users can more or less step around around the Java vs. Python, GUI vs. CLI questions.</p>
<p>https://libraryofcongress.github.io/bagger-js/</p>
<p><strong>5. Integrated into other software platforms/programs</strong></p>
<p>The BagIt library has also been integrated into larger, more complex software packages, designed for broader digital repository management. Creating bags is only one piece of what these platforms are designed to do. One good example is <a href="https://www.archivematica.org/en/" target="_blank" rel="noopener">Archivematica</a>, which can perform all kinds of file conformance checks, transcoding, automatic metadata generation and more. But it does package data according to the BagIt spec whenever it actually transfers files from one location to another.</p>
<p>And that's the other, more complicated way to use the BagIt library - by building it into your own software and scripts! Obviously this is a more advanced step for archivists who interested in coding and software development. But the various BagIt versions (Java, Python, JavaScript) and the spec itself are all in the public domain and anyone could incorporate them into their own applications, or recreate the BagIt library in the programming language of their choice (there is, for instance, a <a href="https://github.com/tipr/bagit" target="_blank" rel="noopener">BagIt-ruby version</a> floating around out there, though it's apparently deprecated and I've never heard of anyone who used it).</p>
