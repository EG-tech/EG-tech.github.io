---
layout: post
title: Dual-Boot a Windows Machine
date: 2016-06-24 09:57:22.000000000 -04:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Digital Preservation
tags:
- so many Windows
- Windows 10
- Windows 7
meta:
  _oembed_d9e6be033d6ae706e00ae735634bcae7: "{{unknown}}"
  _publicize_done_external: a:1:{s:7:"twitter";a:1:{i:5947049;s:55:"https://twitter.com/The_BFOOL/status/746341482932514817";}}
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _thumbnail_id: '1132'
  _publicize_job_id: '24149783656'
  _publicize_done_14287373: '1'
  _wpas_done_5947049: '1'
  publicize_twitter_user: The_BFOOL
author:
  login: bestfilmsofourlives
  email: e.gates42@gmail.com
  display_name: Ethan
  first_name: ''
  last_name: ''
---
<p>It is an inconvenient truth that the MIAP program is spread across two separate buildings along Broadway. They're only about five minutes apart, and the vast majority of the time this presents no problems for students or staff, but it does mean that my office and one of our primary lab spaces are in geographically separate locations. Good disaster planning, troublesome for day-to-day operations.</p>
<p>The Digital Forensics Lab (alternately referred to as the Old Media Lab or the Dead Media Lab, largely depending on my current level of frustration or endearment towards the equipment contained within it) is where we house our computing equipment for the excavation and exploration of born-digital archival content: A/V files created and contained on hard drive, CD, floppy disk, zip disk, etc. We have both contemporary and legacy systems to cover decades of potential media, primarily Apple hardware (stretching back to a Macintosh SE running OS 7), but also a couple of powerful modern Windows machines set up with virtual machines and emulators to handle Microsoft operating systems back to Windows 3.1 and MS-DOS.</p>
<p>Having to schedule planned visits over from my office to the main Tisch building in order to test, update, or otherwise work with any of this equipment is mildly irksome. That's why my office Mac is chock full of emulators and other forensic software that I hardly use on any kind of regular basis - when I get a request from a class for a new tool to be installed in the Digital Forensics Lab, it's much easier to familiarize myself with the setup process right where I am before working with legacy equipment; and I'm just point-blank unlikely to trek over the other building for no other reason than to test out new software that I've just read about or otherwise think might be useful for our courses.</p>
<p>[caption id="attachment_1123" align="aligncenter" width="521"]<img class="  wp-image-1123 aligncenter" src="{{ site.baseurl }}/images/sleepy-office-worker-at-desk-with-multiple-coffees.jpg" alt="sleepy-office-worker-at-desk-with-multiple-coffees" width="521" height="347" /> #ProtestantWorkEthic[/caption]</p>
<p>This is a long-winded way of justifying why the department purchased, at my request, a new Windows machine that I will be able to use as a testing ground for Windows-based software and workflows (I had previously installed a Windows 7 virtual machine on my Mac to try to get around some of this, but the slowed processing power of a VM on a desktop not explicitly setup for such a purpose was vaguely intolerable). The first thing I was quite excited to do with this new hardware was to set up a dual-boot operating system: that is, make it so that on starting up the computer I would have the choice of using either Windows 7 or Windows 10, which is the main thing I'm going to talk about today.</p>
<p>[caption id="attachment_1138" align="aligncenter" width="583"]<img class="  wp-image-1138 aligncenter" src="{{ site.baseurl }}/images/img_2329.jpg" alt="IMG_2329" width="583" height="437" /> Swag[/caption]</p>
<p>Pretty much all of our Windows computers in the archive and MIAP program still run Windows 7 Pro, for a variety of reasons - Windows 8 was geared so heavily towards improved communication with and features for mobile devices that it was hardly worth the cost of upgrading an entire department, and Windows 10 is still not even a year old, which gives me pause in terms of the stability and compatibility of software that we rely on from Windows 7. So I needed Windows 7 in order to test how new programs work with our current systems. However, as it increases in market share and developers begin to migrate over, I'm increasingly intrigued by Windows 10, to the point that I also wanted access to it in order to test out the direction our department <em>might</em> go in the future. In particular I very much wanted to try out the new Windows Subsystem for Linux, available in the Windows 10 Anniversary Update coming this summer - a feature that will in theory make Linux utilities and local files accessible to the Windows user via a Bash shell (the command-line interface already seen on Mac and Ubuntu setups). Depending how extensive the compatibility gets, that could smooth over some of the kinks we have getting all our students (on different operating systems) on the same page in our Digital Literacy and Digital Preservation courses. But that is a more complicated topic for another day.</p>
<p>When my new Windows machine arrived, it came with a warning right on the box that even though the computer came pre-installed with Windows 7 and licenses/installation discs for both 7 and Windows 10,</p>
<blockquote><p>You may only use one version of the Windows software at a time. Switching versions will require you to uninstall one version and install the other version.</p></blockquote>
<p><img class="  wp-image-1083 aligncenter" src="{{ site.baseurl }}/images/1d8acd8c6e8e337ce31bef84a8636491.jpg" alt="1d8acd8c6e8e337ce31bef84a8636491" width="549" height="288" /></p>
<p>This statement is only broadly true if you have no sense of partitioning, a process by which you can essentially separate your hard drive into distinct, discrete sections. The computer can basically treat separate partitions as separate drives, allowing you to format the different partitions with entirely separate file systems, or, as we will see here, install completely different operating systems.</p>
<p>Now, as it happens, it also turned out to be semi-true for my specific setup, but only temporarily and because of some kinks specific to manufacturer who provided this desktop (hi, HP!). I'll explain more in a minute, but right now would be a good point to note that I was working with a totally clean machine, and therefore endangering no personal files in this whole partitioning/installation process. If you also want to setup some kind of dual-boot partition, <span style="text-decoration:underline;"><em>please please please</em></span> make sure all of your files are <span style="text-decoration:underline;">backed up elsewhere first</span>. You never know when you will, in fact, have to perform a clean install and completely wipe your hard drive just to get back to square one.</p>
<p>[caption id="attachment_1127" align="aligncenter" width="600"]<img class=" size-full wp-image-1127 aligncenter" src="{{ site.baseurl }}/images/1a0a18d74db871e6358d7526b271c0e749d9cedb8afd2411816625802370c924.jpg" alt="1a0a18d74db871e6358d7526b271c0e749d9cedb8afd2411816625802370c924" width="600" height="300" /> "Arnim Zola sez: back up your files, kids!"[/caption]</p>
<p>So, as the label said, booting up the computer right out of the box, I got a clean Windows 7 setup. The first step was to make a new blank partition on the hard drive, on to which I could install the Windows 10 operating system files. In order to do this, we run the Windows Disk Management utility (you can find it by just hitting the Windows Start button and typing "disk management" into the search bar:</p>
<p><img class="  wp-image-1087 aligncenter" src="{{ site.baseurl }}/images/start.jpg" alt="start" width="479" height="384" /></p>
<p>Once the Disk Management window pops up, I could see the 1TB hard drive installed inside the computer (labelled "Disk 0"), as well as all the partitions (also called "volumes") already on that drive. Some small partitions containing system and recovery files (from which the computer could boot into at least some very basic functionality even if the Windows operating system were to corrupt or fail) were present, but mostly (~900 GB) the drive is dedicated to the main C: volume, which contains all the Windows 7 operating files, program files, personal files if there were any, etc. By right-clicking on this main partition and selecting "Shrink Volume," I can set aside some of that space to a new partition, on to which we will install the Windows 10 OS. (<em>note all illustrative photos gathered after the fact, so some numbers aren't going to line up exactly here, but the process is the same)</em></p>
<p><img class="  wp-image-1092 aligncenter" src="{{ site.baseurl }}/images/hesx3.png" alt="hesx3" width="555" height="306" /></p>
<p>If you wanted to dual-boot two operating systems that use completely incompatible file systems - for instance, Mac and Windows - you would have to set aside space for not only the operating system's files, but also <span style="text-decoration:underline;">all</span> of the memory you would want to dedicate to software, file storage, etc. However, Windows 7 and 10 both use the NTFS file system - meaning Windows 10 can easily read and work with files that have been created on or are stored in a Windows 7 environment. So in setting up this new partition I only technically had to create space for the Windows 10 operating system files, which run about 25 GB total. In practice I wanted to leave some extra space, just in case some software comes along that can only be installed on the Windows 10 partition, so I went ahead and doubled that number to 50 GB (since Disk Management works in MB, we enter "50000" into the amount of space to shrink from the C: volume).</p>
<p><img class="  wp-image-1094 aligncenter" src="{{ site.baseurl }}/images/shrink_volume.png" alt="shrink_volume" width="559" height="357" /></p>
<p>Disk Management runs for a minute and then a new Blank Partition appears on Disk 0. Perfect! I pop in the Windows 10 installation disc that came with the computer and restart. In my case, the hardware automatically knew to boot up from the installation disc (rather than the Windows 7 OS on the hard drive), but it's possible others would have to reset the boot order to go from the CD/DVD drive first, rather than the installed hard drive (this involves the computer's BIOS or UEFI firmware interface - more on that in a minute - but for now if it gives you problems, there's plenty of guides out there on the Googles).</p>
<p>Following the instructions for the first few parts of the Windows 10 installer is straightforward (entering a user name and password, name for the computer, suchlike), but I ran into a problem when finally given the option to select the partition on to which I wanted to install Windows 10. I could see the blank, unformatted 50 GB partition I had created, right there, but in trying to select it, I was given this warning message:</p>
<blockquote><p>Windows cannot be installed to this disk. The selected disk is of the GPT partition style.</p></blockquote>
<p>Humph. In fact I could not select ANY of the partitions on the disk, so even if I had wanted to do a clean install of Windows 10 on to the main partition where Windows 7 now lived, I couldn't have done that either. <a href="http://lmgtfy.com/?q=what+is+a+GPT+partition">What gives, internet?</a></p>
<p>So for many many many years (in computer terms, anyway - computer years are probably at least equivalent to dog years), PCs came installed with a firmware interface called the BIOS - Basic Input/Output System. In order to install or reinstall operating system software, you need a way to send very basic commands to the hard drive. The BIOS was able to do this because it lived on the PC's motherboard, rather than on the hard drive - as long as your BIOS was intact, your computer would have at least some very basic functionality, even if your operating system corrupted or your hard drive had a mechanical failure. With the BIOS you could reformat your hard drive, select whether you booted the operating system from the hard drive or an external source (e.g. floppy drive or CD drive), etc.</p>
<p>[caption id="attachment_1097" align="aligncenter" width="460"]<img class=" size-full wp-image-1097 aligncenter" src="{{ site.baseurl }}/images/header.jpg" alt="header" width="460" height="215" /> Or rule a dystopian underwater society! ...wait[/caption]</p>
<p>In the few seconds when you first powered on a PC, the BIOS would look to the very first section of a hard drive, which (if already formatted) would contain something called a Master Boot Record, a table that contains information about the partitions present on that hard drive: how many partitions are present, how large each of them are, what file system was present on each, which one(s) contained bootable operating system software, which partition to boot from first (if multiple partitions had a bootable OS).</p>
<p>[caption id="attachment_1132" align="aligncenter" width="569"]<img class=" size-full wp-image-1132 aligncenter" src="{{ site.baseurl }}/images/windows-cannot-be-installed-to-this-disk.jpg" alt="windows-cannot-be-installed-to-this-disk" width="569" height="422" /> You probably saw something like this screen by accident once when your cat walked across your keyboard right as you started up the computer.[/caption]</p>
<p>Here's the thing: because of the limitations of the time, the BIOS and MBR partition style can only handle a total of four partitions on any one drive, and can only boot from a partition if it isless than about 2.2 TB in size. For a long time, that was plenty of space and functionality to work with, but with rapid advancements in the storage size of hard drives and the processing power of motherboards, the BIOS and MBR partitioning became increasingly severe and arbitrary roadblocks. So from the late '90s through the mid-'00s, an international consortium developed a more advanced firmware interface, called UEFI (Unified Extensible Firmware Interface) that employed a new partition system, GPT (GUID Partition Table). With GPT, there's theoretically no limit to the number of partitions on a drive, and  UEFI can boot from partitions as large as 9.4 ZB (yes, that's zettabytes). For comparison's sake, 1 ZB is about equivalent to 36,000 <span style="text-decoration:underline;">years</span> of 1080p high-definition video. So we're probably set for motherboard firmware and partition styles for a while.</p>
<p>[caption id="attachment_1112" align="aligncenter" width="372"]<img class="  wp-image-1112 aligncenter" src="{{ site.baseurl }}/images/n2cnt4.jpg" alt="n2cnt4" width="372" height="540" /> We're expected to hit about 40 zettabytes of known data in 2020. Like, total. In the world. Our UEFI motherboards are good for now.[/caption]</p>
<p>UEFI can not read MBR partitions as is, though it has a legacy mode that can be enabled to restrict its own functionality to that of the BIOS, and thereby read MBR. If the UEFI motherboard is set to <span style="text-decoration:underline;">only</span> boot from the legacy BIOS, it can not understand or work with GPT partitions. Follow?</p>
<p>So GETTING BACK TO WHAT WE WERE ACTUALLY DOING....the reason I could not install a new, Windows 10-bootable partition on to my drive was that the UEFI motherboard in my computer had booted from the legacy BIOS -for some reason.</p>
<p>[caption id="attachment_1118" align="aligncenter" width="612"]<img class="  wp-image-1118 aligncenter" src="{{ site.baseurl }}/images/jdhvc.png" alt="jdhvc" width="612" height="172" /> Me.[/caption]</p>
<p>Honestly, I'm not sure why this is. Obviously this was not a clean hard drive when I received it - someone at HP had already installed Windows 7 on to this GPT-partitioned hard drive, which would've required the motherboard to be in UEFI boot mode. So why did it arrive with legacy BIOS boot mode not only enabled, but set <span style="text-decoration:underline;">first</span> in the preferential boot order? My only possible answer is that after installing Windows 7, they went back in and set the firmware settings to legacy BIOS boot mode in order to improve compatibility with the Windows 7 OS - which was developed and released still in the days when BIOS was still the default for new equipment.</p>
<p>This was a quick fix - restart the computer, follow the brief on-screen instructions to enter the BIOS (usually pressing the ESC key, though it can vary with your setup), and navigating through the firmware settings to re-enable UEFI boot mode (I also left legacy BIOS boot enabled, though lower in the boot order, for the above-stated reasoning about compatibility with Windows 7 - so now, theoretically, my computer can start up from either MBR or GPT drives/disks with no problem).</p>
<p>Phew. Are you still with me after all this? As a reward, here's a vine of LeBron James blocking Andre Iguodala to seal an NBA championship, because that is now you owning computer history and functionality.</p>
<p>https://vine.co/v/5BuzmV0Xw5b</p>
<p>From this point on, we can just pop the Windows 10 installation disc back in and follow the instructions like we did before. I can now select the unformatted 50 GB partition on which to install Windows 10 - and the installation wizard basically runs itself. After a lot of practical setup username and password nonsense, now when I start up my computer, I get this screen:</p>
<p><img class="  wp-image-1107 aligncenter" src="{{ site.baseurl }}/images/boot-screen-640x480.jpg" alt="boot-screen-640x480" width="508" height="381" /></p>
<p>And I can just choose whether to enter the Windows 7 or 10 OS. Simple as that. I'll go more into some of what this setup allows me to do (particularly the Windows Subsystem for Linux) another day, as this post has gone on waaaayy too long. Happy summer, everyone!</p>
